<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apartment Details ‚Äî BOOM Rome</title>
    <meta name="description" content="View verified apartment details, photos, and location in Rome. BOOM ‚Äî Get your apartment in days, not weeks.">
    <meta name="theme-color" content="#000000">
    <link rel="icon" type="image/png" href="https://www.boomrome.com/BOOMlogogoldicon512.png">
    <link rel="apple-touch-icon" href="https://www.boomrome.com/BOOMlogogoldicon512.png">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="BOOM Rome">
    <meta property="og:image" content="https://www.boomrome.com/BOOMsocialprofile.png">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EYCD59RDVJ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-EYCD59RDVJ');
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;900&display=swap" rel="stylesheet">

    <style>
        *{margin:0;padding:0;box-sizing:border-box;-webkit-font-smoothing:antialiased}
        :root{--gold:#FFD700;--gold-dark:#F5A623;--gold-light:#FFD54F;--cyan:#00CED1;--green:#00FF88;--pure-black:#000;--dark-void:#0A0A0A;--dark-surface:#111;--text-primary:#FFF;--text-fade:#666;--text-secondary:#999}
        body{font-family:'Inter',-apple-system,sans-serif;background:var(--pure-black);color:var(--text-primary);font-weight:200;line-height:1.6}

        /* ===== NAV ‚Äî matches live site ===== */
        nav{position:fixed;width:100%;top:0;z-index:100;padding:20px 50px;background:rgba(0,0,0,0.98);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,215,0,0.1)}
        .nav-container{max-width:1400px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}
        .logo{display:flex;align-items:center;gap:15px;text-decoration:none;color:#fff}
        .logo-svg{width:80px;height:80px;filter:drop-shadow(0 0 20px rgba(255,215,0,0.5));transition:filter .3s}
        .logo:hover .logo-svg{filter:drop-shadow(0 0 35px rgba(255,215,0,0.8))}
        .logo-text{font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;font-size:32px;font-weight:300;letter-spacing:4px;text-transform:uppercase}
        .nav-links{display:flex;gap:30px;align-items:center}
        .nav-links a{color:rgba(255,255,255,0.6);text-decoration:none;font-size:13px;font-weight:300;text-transform:uppercase;letter-spacing:1px;transition:color .3s}
        .nav-links a:hover{color:var(--gold)}
        .nav-links a.wa-link{color:#25D366}
        .hamburger{display:none;flex-direction:column;gap:5px;cursor:pointer;padding:10px;z-index:200}
        .hamburger span{width:25px;height:2px;background:var(--gold);transition:all .3s}
        .hamburger.active span:nth-child(1){transform:rotate(45deg) translate(5px,5px)}
        .hamburger.active span:nth-child(2){opacity:0}
        .hamburger.active span:nth-child(3){transform:rotate(-45deg) translate(5px,-5px)}
        .mobile-menu{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.98);backdrop-filter:blur(30px);z-index:150;flex-direction:column;align-items:center;justify-content:center;gap:30px}
        .mobile-menu.active{display:flex}
        .mobile-menu a{color:rgba(255,255,255,0.7);text-decoration:none;font-size:18px;font-weight:300;letter-spacing:2px;text-transform:uppercase;transition:color .3s}
        .mobile-menu a:hover{color:var(--gold)}
        .mobile-menu a.wa-mob{margin-top:20px;padding:12px 40px;background:#25D366;color:#fff;border-radius:100px;font-size:14px;font-weight:600;letter-spacing:1px}

        /* ===== LOADING ===== */
        .page-loading{display:flex;align-items:center;justify-content:center;flex-direction:column;gap:20px;min-height:60vh;padding-top:120px}
        .spinner{width:40px;height:40px;border:3px solid rgba(255,255,255,0.08);border-top-color:var(--gold);border-radius:50%;animation:spin .8s linear infinite}
        @keyframes spin{to{transform:rotate(360deg)}}
        .page-loading p{color:var(--text-secondary);font-size:14px}

        /* ===== ERROR ===== */
        .page-error{display:none;align-items:center;justify-content:center;flex-direction:column;gap:20px;min-height:60vh;padding-top:120px;text-align:center}
        .page-error h2{font-size:48px;font-weight:100;text-transform:uppercase}
        .page-error p{color:var(--text-secondary);font-size:16px}
        .page-error a{display:inline-block;margin-top:10px;padding:14px 40px;background:var(--gold);color:#000;text-decoration:none;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:2px;transition:all .3s}
        .page-error a:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(255,215,0,0.3)}

        /* ===== PAGE WRAPPER ===== */
        .apartment-page{display:none;padding-top:120px}

        /* Breadcrumb */
        .breadcrumb{max-width:1400px;margin:0 auto;padding:0 50px 20px;font-size:12px;color:var(--text-fade)}
        .breadcrumb a{color:var(--text-fade);text-decoration:none;transition:color .3s}
        .breadcrumb a:hover{color:var(--gold)}
        .breadcrumb .sep{margin:0 8px;opacity:.4}
        .breadcrumb .current{color:var(--text-secondary)}

        /* ===== HEADER ===== */
        .apt-header{max-width:1400px;margin:0 auto;padding:0 50px 40px}
        .apt-header-top{display:flex;justify-content:space-between;align-items:flex-start;gap:30px;flex-wrap:wrap}
        .apt-title-block{flex:1;min-width:280px}
        .apt-badges{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
        .badge{display:inline-flex;align-items:center;gap:5px;padding:5px 14px;border-radius:100px;font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}
        .badge-available{background:rgba(0,255,136,0.1);color:#00FF88}
        .badge-waitlist{background:rgba(255,149,0,0.1);color:#FF9500}
        .badge-rented{background:rgba(255,59,48,0.1);color:#FF3B30}
        .badge-verified{background:rgba(255,215,0,0.1);color:var(--gold)}
        .badge-video{background:rgba(255,59,48,0.1);color:#FF3B30}
        .apt-name{font-size:clamp(32px,5vw,56px);font-weight:100;text-transform:uppercase;letter-spacing:-1px;line-height:1.1;margin-bottom:12px}
        .apt-address{font-size:15px;color:var(--text-secondary);margin-bottom:6px}
        .apt-zone{display:inline-block;padding:4px 12px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);border-radius:6px;font-size:11px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:1px}
        .apt-price-block{text-align:right;flex-shrink:0}
        .apt-price{font-size:clamp(36px,5vw,56px);font-weight:100;color:var(--gold);line-height:1}
        .apt-price-label{font-size:14px;color:var(--text-fade);margin-top:4px}

        /* Specs */
        .apt-specs{display:flex;gap:30px;flex-wrap:wrap;margin-top:30px;padding-top:30px;border-top:1px solid rgba(255,255,255,0.06)}
        .spec-item{display:flex;align-items:center;gap:8px}
        .spec-icon{width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.06);border-radius:8px;font-size:16px}
        .spec-text{font-size:14px}
        .spec-text small{display:block;font-size:10px;color:var(--text-fade);text-transform:uppercase;letter-spacing:.5px}

        /* ===== MEDIA ===== */
        .media-section{max-width:1400px;margin:0 auto;padding:0 50px 50px}
        .single-hero-img{width:100%;max-height:600px;object-fit:cover;border-radius:16px;border:1px solid rgba(255,255,255,0.06)}
        .media-placeholder{width:100%;height:400px;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:12px;background:var(--dark-void);border:1px dashed rgba(255,255,255,0.1);border-radius:16px;color:var(--text-fade)}
        .media-placeholder span{font-size:48px;opacity:.3}

        /* Carousel */
        .carousel{position:relative;border-radius:16px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);background:var(--dark-void)}
        .carousel-track{display:flex;transition:transform .4s cubic-bezier(.25,.46,.45,.94);will-change:transform}
        .carousel-slide{min-width:100%;position:relative}
        .carousel-slide img{width:100%;height:550px;object-fit:cover;display:block}
        .carousel-slide.video-slide{display:flex;align-items:center;justify-content:center;background:#000}
        .carousel-slide.video-slide iframe{width:100%;height:550px;border:none}
        .carousel-btn{position:absolute;top:50%;transform:translateY(-50%);width:48px;height:48px;background:rgba(0,0,0,0.7);border:1px solid rgba(255,255,255,0.15);border-radius:50%;color:#fff;font-size:18px;cursor:pointer;transition:all .3s;display:flex;align-items:center;justify-content:center;z-index:10;backdrop-filter:blur(10px)}
        .carousel-btn:hover{background:rgba(0,0,0,0.9);border-color:var(--gold);color:var(--gold)}
        .carousel-prev{left:16px}.carousel-next{right:16px}
        .carousel-counter{position:absolute;bottom:16px;right:16px;padding:6px 14px;background:rgba(0,0,0,0.7);border-radius:100px;font-size:12px;color:rgba(255,255,255,0.8);backdrop-filter:blur(10px);z-index:10}
        .carousel-video-badge{position:absolute;top:16px;right:16px;padding:6px 14px;background:rgba(255,59,48,0.9);border-radius:100px;font-size:11px;font-weight:600;color:#fff;z-index:10;display:none}
        .carousel-thumbs{display:flex;gap:8px;margin-top:12px;overflow-x:auto;padding:4px 0;scrollbar-width:none}
        .carousel-thumbs::-webkit-scrollbar{display:none}
        .carousel-thumb{width:72px;height:50px;flex-shrink:0;border-radius:8px;overflow:hidden;cursor:pointer;border:2px solid transparent;opacity:.5;transition:all .3s}
        .carousel-thumb.active{border-color:var(--gold);opacity:1}
        .carousel-thumb:hover{opacity:.8}
        .carousel-thumb img{width:100%;height:100%;object-fit:cover}
        .carousel-thumb.video-thumb{position:relative;background:#111;display:flex;align-items:center;justify-content:center}
        .carousel-thumb.video-thumb::after{content:'‚ñ∂';position:absolute;color:#FF3B30;font-size:18px}

        /* Video section */
        .video-section{margin-top:30px}
        .video-section-label{font-size:11px;text-transform:uppercase;letter-spacing:2px;color:var(--text-fade);margin-bottom:12px;display:flex;align-items:center;gap:8px}
        .video-section-label::before,.video-section-label::after{content:'';flex:1;height:1px;background:rgba(255,255,255,0.06)}
        .video-embed{border-radius:16px;overflow:hidden;border:1px solid rgba(255,255,255,0.06)}
        .video-embed iframe{width:100%;height:450px;border:none;display:block}

        /* ===== TWO COLUMN ===== */
        .apt-content{max-width:1400px;margin:0 auto;padding:0 50px 80px;display:grid;grid-template-columns:1fr 380px;gap:50px;align-items:start}
        .content-section{margin-bottom:50px}
        .content-section-title{font-size:11px;text-transform:uppercase;letter-spacing:3px;color:var(--gold);font-weight:600;margin-bottom:20px;padding-bottom:12px;border-bottom:1px solid rgba(255,215,0,0.15)}
        .apt-description{font-size:16px;line-height:1.8;color:var(--text-secondary);font-weight:300}

        /* Features */
        .features-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}
        .feature-item{display:flex;align-items:center;gap:10px;padding:12px 16px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.05);border-radius:10px;font-size:14px;color:var(--text-secondary);transition:all .3s}
        .feature-item:hover{border-color:rgba(255,215,0,0.2);background:rgba(255,215,0,0.03)}
        .feature-icon{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:rgba(255,215,0,0.08);border-radius:8px;font-size:16px;flex-shrink:0}

        /* Tags */
        .tags-wrap{display:flex;gap:8px;flex-wrap:wrap}
        .tag{padding:6px 16px;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);border-radius:100px;font-size:12px;color:var(--text-secondary)}

        /* Available date */
        .available-date-box{display:flex;align-items:center;gap:12px;padding:16px 20px;background:rgba(0,255,136,0.05);border:1px solid rgba(0,255,136,0.15);border-radius:12px;font-size:14px;color:#00FF88}

        /* ===== MAP ===== */
        .map-container{border-radius:16px;overflow:hidden;border:1px solid rgba(255,255,255,0.06)}
        .map-container iframe{width:100%;height:350px;border:none;display:block;filter:invert(90%) hue-rotate(180deg) brightness(.95) contrast(1.1)}
        .distance-calc{padding:24px;background:var(--dark-void);border:1px solid rgba(255,255,255,0.06);border-radius:16px;margin-top:16px}
        .distance-calc-title{font-size:14px;font-weight:500;margin-bottom:14px}
        .distance-input-row{display:flex;gap:10px}
        .distance-input{flex:1;padding:12px 16px;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);border-radius:10px;color:var(--text-primary);font-family:inherit;font-size:14px;outline:none;transition:border-color .3s}
        .distance-input:focus{border-color:var(--gold)}
        .distance-input::placeholder{color:var(--text-fade)}
        .distance-btn{padding:12px 24px;background:var(--gold);border:none;border-radius:10px;color:#000;font-family:inherit;font-size:13px;font-weight:600;cursor:pointer;text-transform:uppercase;letter-spacing:1px;transition:all .3s;white-space:nowrap}
        .distance-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(255,215,0,0.3)}
        .quick-chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:14px}
        .quick-chip{padding:6px 14px;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);border-radius:100px;font-size:11px;color:var(--text-secondary);cursor:pointer;transition:all .3s}
        .quick-chip:hover{border-color:var(--gold);color:var(--gold);background:rgba(255,215,0,0.05)}
        .route-results{display:none;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:16px}
        .route-results.active{display:grid}
        .route-link{display:flex;flex-direction:column;align-items:center;gap:6px;padding:14px 8px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.06);border-radius:10px;text-decoration:none;color:var(--text-secondary);font-size:11px;text-transform:uppercase;letter-spacing:.5px;transition:all .3s}
        .route-link:hover{border-color:var(--gold);color:var(--gold)}
        .route-link .route-icon{font-size:20px}

        /* ===== SIDEBAR ===== */
        .apt-sidebar{position:sticky;top:130px}
        .sidebar-card{background:var(--dark-void);border:1px solid rgba(255,255,255,0.06);border-radius:20px;padding:30px;margin-bottom:20px}
        .sidebar-price{font-size:36px;font-weight:200;color:var(--gold);margin-bottom:4px}
        .sidebar-price-label{font-size:13px;color:var(--text-fade);margin-bottom:24px}
        .sidebar-cta{display:flex;align-items:center;justify-content:center;gap:10px;width:100%;padding:16px;background:#25D366;border:none;border-radius:12px;color:#fff;font-family:inherit;font-size:15px;font-weight:600;text-decoration:none;cursor:pointer;transition:all .3s}
        .sidebar-cta:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(37,211,102,0.3)}
        .sidebar-cta svg{width:22px;height:22px}
        .sidebar-secondary{display:block;width:100%;padding:14px;margin-top:12px;background:transparent;border:1px solid rgba(255,255,255,0.08);border-radius:12px;color:var(--text-secondary);font-family:inherit;font-size:13px;font-weight:400;text-decoration:none;text-align:center;transition:all .3s}
        .sidebar-secondary:hover{border-color:var(--gold);color:var(--gold)}
        .inquiry-card{background:var(--dark-void);border:1px solid rgba(255,215,0,0.15);border-radius:20px;padding:30px}
        .inquiry-card h3{font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:200;font-size:20px;margin-bottom:4px;color:#fff}
        .inquiry-card p{font-size:13px;color:var(--text-fade);margin-bottom:20px}
        .inquiry-card input,.inquiry-card textarea{width:100%;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);border-radius:10px;padding:12px 14px;color:#fff;font-family:inherit;font-size:14px;margin-bottom:12px;outline:none;transition:border .3s;box-sizing:border-box}
        .inquiry-card input:focus,.inquiry-card textarea:focus{border-color:var(--gold)}
        .inquiry-card textarea{resize:vertical;min-height:80px}
        .inquiry-card button{width:100%;padding:14px;background:linear-gradient(135deg,#FFD700,#FFA500);border:none;border-radius:12px;color:#000;font-family:inherit;font-size:15px;font-weight:600;cursor:pointer;transition:all .3s}
        .inquiry-card button:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(255,215,0,0.3)}
        .inquiry-card button:disabled{opacity:.5;cursor:not-allowed;transform:none}
        .inquiry-success{display:none;text-align:center;padding:20px 0;color:#25D366;font-size:14px}
        .sidebar-trust{display:flex;flex-direction:column;gap:12px;margin-top:24px;padding-top:24px;border-top:1px solid rgba(255,255,255,0.06)}
        .trust-item{display:flex;align-items:center;gap:10px;font-size:12px;color:var(--text-secondary)}
        .trust-item .ti{color:#00FF88;font-size:14px}

        /* ===== UPSELL ===== */
        .upsell-section{max-width:1400px;margin:0 auto;padding:0 50px 100px}
        .upsell-header{text-align:center;margin-bottom:48px}
        .upsell-tag{display:inline-block;padding:8px 20px;background:var(--gold);color:#000;font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:20px}
        .upsell-title{font-size:clamp(28px,4vw,48px);font-weight:100;text-transform:uppercase;letter-spacing:-1px}
        .upsell-subtitle{font-size:15px;color:var(--text-secondary);max-width:520px;margin:14px auto 0;line-height:1.6}

        /* Notify banner */
        .notify-banner{background:linear-gradient(135deg,rgba(255,215,0,0.05) 0%,rgba(0,206,209,0.04) 100%);border:1px solid rgba(255,215,0,0.12);border-radius:20px;padding:32px 36px;margin-bottom:32px;display:flex;align-items:center;gap:28px;transition:border-color .3s}
        .notify-banner:hover{border-color:rgba(255,215,0,0.25)}
        .notify-icon{width:56px;height:56px;background:rgba(255,215,0,0.08);border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:24px;flex-shrink:0}
        .notify-text{flex:1}
        .notify-text h3{font-size:17px;font-weight:500;margin-bottom:4px}
        .notify-text p{font-size:13px;color:var(--text-secondary);line-height:1.5}
        .notify-actions{display:flex;gap:10px;flex-shrink:0}
        .notify-actions .nbtn{padding:12px 24px;border-radius:10px;font-family:inherit;font-size:13px;font-weight:600;cursor:pointer;transition:all .3s;text-decoration:none;display:inline-flex;align-items:center;gap:8px;white-space:nowrap;border:none}
        .nbtn-primary{background:var(--gold);color:#000}
        .nbtn-primary:hover{box-shadow:0 6px 24px rgba(255,215,0,0.25);transform:translateY(-1px)}
        .nbtn-wa{background:#25D366;color:#fff}
        .nbtn-wa:hover{box-shadow:0 6px 24px rgba(37,211,102,0.25);transform:translateY(-1px)}
        @media(max-width:900px){.notify-banner{flex-direction:column;text-align:center;gap:18px;padding:28px 24px}.notify-actions{width:100%;flex-direction:column}.notify-actions .nbtn{justify-content:center}}

        /* VIDEO ‚Äî LIVING PHONE (Ultra Premium) */
        .video-showcase{display:flex;align-items:center;gap:48px;margin-bottom:40px;padding:40px;background:linear-gradient(135deg,rgba(255,215,0,0.03) 0%,rgba(0,0,0,0.2) 50%,rgba(255,215,0,0.02) 100%);border:1px solid rgba(255,215,0,0.06);border-radius:24px;position:relative;overflow:hidden;opacity:0;transform:translateY(20px);transition:opacity .8s ease,transform .8s ease}
        .video-showcase.visible{opacity:1;transform:translateY(0)}
        .video-showcase::before{content:'';position:absolute;top:-50%;right:-20%;width:400px;height:400px;background:radial-gradient(circle,rgba(255,215,0,0.04) 0%,transparent 70%);pointer-events:none;animation:ambientDrift 12s infinite ease-in-out}
        @keyframes ambientDrift{0%,100%{transform:translate(0,0)}25%{transform:translate(-20px,15px)}50%{transform:translate(10px,-10px)}75%{transform:translate(-10px,-20px)}}
        .video-copy{flex:1;z-index:1}
        .video-copy .vc-tag{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;background:rgba(255,215,0,0.08);border:1px solid rgba(255,215,0,0.12);border-radius:20px;font-size:10px;font-weight:600;letter-spacing:1px;text-transform:uppercase;color:var(--gold);margin-bottom:16px}
        .video-copy .vc-tag .pulse{width:6px;height:6px;background:var(--gold);border-radius:50%;animation:livePulse 2s infinite}
        @keyframes livePulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.4;transform:scale(.8)}}
        .video-copy h3{font-size:22px;font-weight:300;margin-bottom:8px;line-height:1.3}
        .video-copy h3 strong{font-weight:500;color:var(--gold)}
        .video-copy p{font-size:14px;color:var(--text-secondary);line-height:1.6;max-width:380px;margin-bottom:20px}
        .video-copy .vc-stats{display:flex;gap:24px}
        .video-copy .vc-stat{font-size:11px;color:var(--text-fade);display:flex;align-items:center;gap:5px}
        .video-copy .vc-stat span{color:var(--gold);font-weight:600;font-size:13px}
        .video-device{position:relative;flex-shrink:0;cursor:pointer}
        .video-device:hover .vd-glow{opacity:.9;transform:scale(1.15)}
        .video-device:hover .vd-frame{border-color:rgba(255,215,0,0.25);transform:translateY(-6px) scale(1.02)}
        /* Glow ‚Äî breathing gold aura */
        .vd-glow{position:absolute;inset:-35px;background:radial-gradient(ellipse,rgba(255,215,0,0.12) 0%,rgba(255,215,0,0.04) 40%,transparent 70%);border-radius:50%;opacity:.3;transition:all .8s cubic-bezier(.25,.46,.45,.94);filter:blur(25px);animation:glowBreath 4s infinite ease-in-out;pointer-events:none}
        .video-device.playing .vd-glow{opacity:.7;animation:glowBreathPlaying 3s infinite ease-in-out}
        @keyframes glowBreath{0%,100%{opacity:.3;transform:scale(1)}50%{opacity:.5;transform:scale(1.04)}}
        @keyframes glowBreathPlaying{0%,100%{opacity:.5;transform:scale(1)}50%{opacity:.75;transform:scale(1.08)}}
        /* Phone frame */
        .vd-frame{width:160px;height:284px;border-radius:24px;border:2px solid rgba(255,255,255,0.08);background:#000;overflow:hidden;position:relative;box-shadow:0 12px 50px rgba(0,0,0,0.5),0 0 0 1px rgba(255,255,255,0.03);transition:all .5s cubic-bezier(.25,.46,.45,.94)}
        .video-device.playing .vd-frame{border-color:rgba(255,215,0,0.12);box-shadow:0 16px 60px rgba(0,0,0,0.5),0 0 40px rgba(255,215,0,0.06)}
        .vd-notch{position:absolute;top:8px;left:50%;transform:translateX(-50%);width:44px;height:5px;background:rgba(255,255,255,0.08);border-radius:10px;z-index:3}
        .vd-screen{width:100%;height:100%;position:relative;overflow:hidden}
        /* Shimmer loading effect */
        .vd-screen::after{content:'';position:absolute;inset:0;background:linear-gradient(110deg,transparent 25%,rgba(255,255,255,0.03) 37%,transparent 50%);background-size:200% 100%;z-index:1;animation:shimmer 2.5s infinite;pointer-events:none}
        .video-device.playing .vd-screen::after{opacity:0;transition:opacity .6s}
        @keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
        .vd-screen img{width:100%;height:100%;object-fit:cover;position:absolute;inset:0;transition:opacity 1.2s cubic-bezier(.25,.46,.45,.94)}
        .vd-screen iframe{width:100%;height:100%;border:none;position:absolute;inset:0;opacity:0;transition:opacity 1s cubic-bezier(.25,.46,.45,.94) .3s}
        .video-device.playing .vd-screen iframe{opacity:1}
        /* Play button */
        .vd-play{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;z-index:2;background:rgba(0,0,0,0.15);transition:all .6s cubic-bezier(.25,.46,.45,.94)}
        .vd-play.hidden{opacity:0;pointer-events:none;transform:scale(.8)}
        .vd-play-ring{width:52px;height:52px;border-radius:50%;border:2px solid rgba(255,215,0,0.5);display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.3);backdrop-filter:blur(8px);transition:all .4s cubic-bezier(.25,.46,.45,.94);animation:ringPulse 3s infinite ease-in-out}
        @keyframes ringPulse{0%,100%{box-shadow:0 0 0 0 rgba(255,215,0,0.2)}50%{box-shadow:0 0 0 12px rgba(255,215,0,0)}}
        .video-device:hover .vd-play-ring{border-color:rgba(255,215,0,0.9);background:rgba(255,215,0,0.15);transform:scale(1.1)}
        .vd-play-ring::after{content:'';width:0;height:0;border-left:18px solid rgba(255,215,0,0.9);border-top:11px solid transparent;border-bottom:11px solid transparent;margin-left:4px}
        /* Bottom bar */
        .vd-bar{position:absolute;bottom:0;left:0;right:0;padding:10px 14px;background:linear-gradient(transparent,rgba(0,0,0,0.85));z-index:2;display:flex;align-items:center;gap:8px;opacity:.8;transition:opacity .4s}
        .video-device.playing .vd-bar{opacity:1}
        .vd-bar-dot{width:5px;height:5px;background:#FF0000;border-radius:50%;transition:all .3s}
        .video-device.playing .vd-bar-dot{animation:recDot 1.5s infinite}
        @keyframes recDot{0%,100%{opacity:1}50%{opacity:.3}}
        .vd-bar span{font-size:9px;color:rgba(255,255,255,0.7);letter-spacing:.5px;text-transform:uppercase}
        /* Cinema Modal */
        .video-modal{position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,0);display:none;align-items:center;justify-content:center;backdrop-filter:blur(0px);transition:background .4s ease,backdrop-filter .4s ease}
        .video-modal.open{display:flex;background:rgba(0,0,0,0.95);backdrop-filter:blur(16px)}
        .video-modal-frame{width:min(380px,88vw);aspect-ratio:9/16;border-radius:20px;overflow:hidden;position:relative;box-shadow:0 0 120px rgba(255,215,0,0.08),0 40px 100px rgba(0,0,0,0.7);transform:scale(.9);opacity:0;transition:all .4s cubic-bezier(.16,1,.3,1)}
        .video-modal.open .video-modal-frame{transform:scale(1);opacity:1}
        .video-modal-frame iframe{width:100%;height:100%;border:none}
        .video-modal-close{position:absolute;top:16px;right:16px;width:36px;height:36px;background:rgba(0,0,0,0.5);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,0.1);border-radius:50%;color:#fff;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s;z-index:10}
        .video-modal-close:hover{background:rgba(255,215,0,0.2);border-color:rgba(255,215,0,0.3);transform:scale(1.1)}
        @media(max-width:900px){.video-showcase{flex-direction:column;text-align:center;gap:28px;padding:28px 24px}.video-copy p{max-width:none}.video-copy .vc-stats{justify-content:center}.vd-frame{width:140px;height:248px}}
        .video-showcase.hidden{display:none}

        /* Service cards */
        .upsell-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
        .upsell-card{position:relative;padding:0;background:var(--dark-void);border:1px solid rgba(255,255,255,0.05);border-radius:20px;overflow:hidden;transition:all .4s;display:flex;flex-direction:column}
        .upsell-card:hover{transform:translateY(-6px);box-shadow:0 24px 60px rgba(0,0,0,0.5)}
        .upsell-card.featured{border-color:rgba(255,215,0,0.15)}
        .upsell-card.featured:hover{border-color:rgba(255,215,0,0.35)}
        .upsell-card-popular{position:absolute;top:0;left:0;right:0;padding:6px;text-align:center;background:var(--gold);color:#000;font-size:10px;font-weight:800;letter-spacing:1.5px;text-transform:uppercase}
        .upsell-card-top{padding:32px 28px 0;flex:1}
        .upsell-card.featured .upsell-card-top{padding-top:44px}
        .upsell-card-badge{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;border-radius:8px;font-size:10px;font-weight:700;letter-spacing:.5px;text-transform:uppercase;margin-bottom:16px}
        .badge-pfs{background:rgba(255,215,0,0.1);color:var(--gold)}
        .badge-das{background:rgba(0,206,209,0.1);color:#00CED1}
        .badge-vv{background:rgba(255,107,107,0.1);color:#FF6B6B}
        .upsell-card-title{font-size:22px;font-weight:400;margin-bottom:6px}
        .upsell-card-desc{font-size:13px;color:var(--text-secondary);line-height:1.6;margin-bottom:20px}
        .upsell-card-price-row{display:flex;align-items:baseline;gap:8px;margin-bottom:20px}
        .upsell-card-price-val{font-size:32px;font-weight:200;color:var(--gold)}
        .upsell-card-price-unit{font-size:13px;color:var(--text-fade)}
        .upsell-card-features{list-style:none;margin:0 0 24px;padding:0}
        .upsell-card-features li{display:flex;align-items:flex-start;gap:10px;padding:6px 0;font-size:13px;color:var(--text-secondary);line-height:1.4}
        .upsell-card-features li .ck{color:var(--gold);font-weight:700;font-size:11px;margin-top:2px;flex-shrink:0}
        .upsell-card-bottom{padding:20px 28px;border-top:1px solid rgba(255,255,255,0.04);margin-top:auto}
        .upsell-card-cta{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;padding:14px;border-radius:12px;font-size:14px;font-weight:600;text-decoration:none;transition:all .3s;border:none;cursor:pointer;font-family:inherit}
        .cta-gold{background:var(--gold);color:#000}
        .cta-gold:hover{box-shadow:0 8px 30px rgba(255,215,0,0.3);transform:translateY(-1px)}
        .cta-outline{background:transparent;border:1px solid rgba(255,255,255,0.1);color:var(--text-secondary)}
        .cta-outline:hover{border-color:var(--gold);color:var(--gold)}

        /* ===== MOBILE CTA ===== */
        .mobile-cta{display:none;position:fixed;bottom:0;left:0;right:0;padding:16px 20px;background:rgba(0,0,0,0.95);backdrop-filter:blur(20px);border-top:1px solid rgba(255,215,0,0.15);z-index:90;align-items:center;justify-content:space-between;gap:16px}
        .mobile-cta-price{font-size:22px;font-weight:200;color:var(--gold)}
        .mobile-cta-price small{font-size:12px;color:var(--text-fade);display:block}
        .mobile-cta-btn{display:flex;align-items:center;gap:8px;padding:14px 28px;background:#25D366;border:none;border-radius:12px;color:#fff;font-family:inherit;font-size:14px;font-weight:600;text-decoration:none;white-space:nowrap}

        /* ===== FOOTER ‚Äî matches live site ===== */
        footer{padding:80px 50px 30px;background:var(--dark-void);border-top:1px solid rgba(255,255,255,0.05)}
        .footer-grid{max-width:1400px;margin:0 auto 60px;display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:60px}
        .footer-brand h3{font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;font-size:24px;font-weight:300;letter-spacing:4px;text-transform:uppercase;margin-bottom:16px}
        .footer-brand p{font-size:14px;color:var(--text-secondary);line-height:1.8}
        .footer-links h4{font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:2px;margin-bottom:20px;color:var(--text-primary)}
        .footer-links ul{list-style:none}
        .footer-links li{margin-bottom:12px}
        .footer-links a{color:var(--text-secondary);text-decoration:none;font-size:14px;transition:color .3s}
        .footer-links a:hover{color:var(--gold)}
        .footer-bottom{max-width:1400px;margin:0 auto;padding-top:30px;border-top:1px solid rgba(255,255,255,0.05);display:flex;justify-content:space-between;font-size:12px;color:var(--text-fade)}

        /* ===== RESPONSIVE ===== */
        @media(max-width:1024px){
            .apt-content{grid-template-columns:1fr}
            .apt-sidebar{position:static}
            .mobile-cta{display:flex}
            .upsell-grid{grid-template-columns:1fr}
            .upsell-card.featured{order:-1}
        }
        @media(max-width:768px){
            nav{padding:15px 20px}
            .nav-links{display:none}
            .hamburger{display:flex}
            .logo-svg{width:45px;height:45px}
            .logo-text{font-size:22px;letter-spacing:2px}
            .breadcrumb,.apt-header,.media-section,.apt-content,.upsell-section{padding-left:20px;padding-right:20px}
            .apt-header-top{flex-direction:column}
            .apt-price-block{text-align:left}
            .carousel-slide img,.carousel-slide.video-slide iframe{height:300px}
            .single-hero-img{max-height:350px}
            .video-embed iframe{height:280px}
            .map-container iframe{height:250px}
            .route-results{grid-template-columns:repeat(2,1fr)}
            footer{padding:60px 20px 20px}
            .footer-grid{grid-template-columns:1fr;gap:40px}
            .footer-bottom{flex-direction:column;gap:8px;text-align:center}
        }
        @media(max-width:480px){
            .apt-name{font-size:28px}
            .apt-specs{gap:16px}
            .features-grid{grid-template-columns:1fr}
            .distance-input-row{flex-direction:column}
            .carousel-slide img,.carousel-slide.video-slide iframe{height:240px}
        }
        @media(max-width:1024px){footer{padding-bottom:100px}}
    </style>
</head>
<body>

    <!-- NAV -->
    <nav>
        <div class="nav-container">
            <a href="/" class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="logo-svg">
                    <defs>
                      <linearGradient id="goldGradientNav" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stop-color="#FFD54F"/>
                        <stop offset="100%" stop-color="#F5A623"/>
                      </linearGradient>
                    </defs>
                    <g transform="translate(0,1024) scale(0.1,-0.1)" fill="url(#goldGradientNav)">
                      <path d="M4860 8749 c-509 -29 -976 -161 -1413 -401 -580 -317 -1057 -806 -1350 -1383 -148 -292 -229 -532 -291 -859 -89 -465 -69 -1005 54 -1461 184 -688 616 -1308 1232 -1769 492 -368 1172 -609 1794 -635 546 -22 987 57 1489 267 503 211 979 589 1327 1053 340 453 557 994 630 1569 17 135 17 630 0 760 -93 716 -396 1341 -900 1861 -280 289 -569 498 -922 667 -416 200 -813 303 -1285 332 -165 10 -170 10 -365 -1z m610 -144 c743 -103 1436 -459 1919 -985 338 -367 562 -751 704 -1205 276 -879 132 -1858 -388 -2640 -242 -364 -493 -615 -900 -900 l-70 -49 109 104 c413 396 679 919 767 1505 33 217 33 558 0 765 -75 476 -257 896 -549 1265 -127 161 -363 380 -549 511 -300 211 -689 363 -1079 420 -172 26 -604 26 -764 0 -296 -47 -545 -128 -808 -262 -236 -122 -440 -271 -632 -464 -486 -485 -749 -1121 -751 -1815 -1 -611 170 -1148 515 -1608 100 -134 286 -335 382 -413 33 -27 -8 -2 -91 55 -513 351 -904 805 -1143 1331 -71 156 -136 336 -168 465 -9 33 -19 76 -24 95 -5 19 -20 100 -34 180 -59 343 -60 740 0 1070 81 456 229 826 479 1200 246 368 558 669 949 917 386 245 881 418 1321 462 61 6 124 13 140 15 73 10 556 -4 665 -19z m-60 -1329 c105 -16 258 -49 335 -72 82 -26 197 -66 240 -84 149 -65 190 -84 266 -126 677 -379 1129 -1049 1246 -1849 27 -182 24 -517 -5 -695 -75 -458 -225 -813 -500 -1179 -116 -154 -340 -369 -527 -506 -44 -32 -87 -63 -95 -69 -8 -6 35 39 96 99 178 177 283 321 397 550 161 322 231 676 205 1045 -32 467 -223 902 -542 1237 -239 251 -521 426 -873 542 -79 26 -273 67 -383 81 -108 13 -349 13 -465 0 -276 -32 -597 -145 -834 -293 -224 -140 -466 -378 -613 -602 -307 -470 -407 -1055 -273 -1599 80 -327 217 -589 454 -871 71 -84 73 -88 31 -56 -293 225 -547 535 -718 877 -34 68 -65 143 -122 294 -42 112 -101 383 -120 555 -14 127 -14 401 0 534 51 482 223 912 516 1288 269 344 654 620 1085 778 160 59 400 115 574 134 121 13 508 5 625 -13z m-30 -1165 c401 -81 721 -242 992 -499 643 -612 769 -1607 300 -2367 -118 -190 -291 -386 -463 -524 -137 -111 -148 -113 -49 -12 110 112 206 248 275 386 67 137 98 222 132 367 24 103 26 132 27 323 0 182 -3 224 -22 310 -47 211 -126 394 -245 569 -126 186 -358 387 -564 490 -384 191 -823 225 -1218 95 -482 -160 -854 -541 -1004 -1029 -117 -379 -81 -810 96 -1165 37 -72 130 -215 166 -252 17 -18 26 -33 20 -33 -6 0 -61 52 -121 116 -259 272 -424 575 -511 934 -111 459 -18 1006 245 1430 298 483 791 797 1379 880 110 16 448 4 565 -19z m-239 -911 c360 -28 680 -171 925 -415 194 -193 317 -415 382 -688 24 -102 26 -130 26 -312 0 -191 -1 -205 -30 -320 -53 -205 -132 -372 -251 -535 -58 -79 -263 -288 -323 -330 -31 -22 -29 -18 18 35 195 220 312 519 312 795 0 325 -121 614 -350 841 -369 364 -926 453 -1385 222 -336 -170 -578 -499 -636 -865 -19 -126 -7 -371 25 -490 44 -162 97 -284 173 -398 9 -14 -4 -5 -30 20 -26 24 -45 51 -42 58 2 7 1 11 -4 7 -11 -6 -58 51 -118 140 -109 163 -183 347 -219 545 -23 127 -23 351 -1 489 55 335 248 677 492 871 261 208 530 311 881 338 11 1 81 -3 155 -8z m29 -714 c459 -74 823 -428 895 -869 58 -358 -60 -696 -345 -987 l-34 -35 22 35 c115 182 179 403 168 575 -14 235 -104 433 -268 591 -137 134 -287 209 -472 239 -115 19 -187 19 -303 0 -337 -55 -612 -302 -704 -635 -32 -113 -34 -325 -5 -440 23 -92 70 -213 98 -254 l21 -31 -31 29 c-39 36 -120 152 -155 221 -35 71 -81 215 -102 319 -25 130 -17 357 17 476 102 354 357 618 706 730 152 49 331 62 492 36z m-73 -567 c178 -24 327 -101 454 -236 137 -143 199 -303 201 -513 1 -162 -42 -309 -135 -453 -52 -82 -73 -97 -38 -28 51 99 67 290 36 412 -57 219 -251 413 -466 464 -75 17 -236 20 -311 4 -213 -44 -422 -247 -473 -460 -31 -133 -13 -325 41 -431 35 -70 8 -47 -52 43 -58 88 -90 167 -114 286 -25 121 -25 220 -1 331 33 146 84 243 186 351 171 183 413 266 672 230z m15 -470 c80 -17 186 -76 248 -139 106 -107 158 -248 147 -398 -6 -92 -25 -152 -79 -250 -45 -82 -60 -91 -27 -17 18 41 21 62 17 149 -4 89 -8 108 -35 162 -43 82 -126 165 -209 205 -58 29 -80 34 -158 37 -112 5 -184 -12 -259 -62 -182 -121 -251 -323 -171 -506 l24 -55 -25 30 c-36 44 -92 162 -104 223 -39 189 14 369 146 492 105 99 204 139 345 139 48 1 111 -4 140 -10z"/>
                    </g>
                  </svg>
                <span class="logo-text">BOOM</span>
            </a>
            <div class="nav-links">
                <a href="/apartments.html">Apartments</a>
                <a href="/property-finding.html">Property Finding</a>
                <a href="/deal-assistance.html">Deal Assistance</a>
                <a href="/virtual-viewing.html">Virtual Viewing</a>
                <a href="/concierge.html">Concierge</a>
                <a href="/about.html">About</a>
                <a href="https://wa.me/393313251961" class="wa-link">WhatsApp</a>
            </div>
            <div class="hamburger" id="hamburger"><span></span><span></span><span></span></div>
        </div>
    </nav>

    <div class="mobile-menu" id="mobileMenu">
        <a href="/">Home</a>
        <a href="/apartments.html">Apartments</a>
        <a href="/property-finding.html">Property Finding</a>
        <a href="/deal-assistance.html">Deal Assistance</a>
        <a href="/virtual-viewing.html">Virtual Viewing</a>
        <a href="/concierge.html">Concierge</a>
        <a href="/about.html">About</a>
        <a href="/login.html">Login</a>
        <a href="https://wa.me/393313251961" class="wa-mob">WhatsApp Us</a>
    </div>

    <!-- LOADING -->
    <div class="page-loading" id="pageLoading"><div class="spinner"></div><p>Loading apartment details‚Ä¶</p></div>

    <!-- ERROR -->
    <div class="page-error" id="pageError"><h2>Not Found</h2><p>This apartment listing could not be loaded.</p><a href="/apartments.html">Browse All Apartments</a></div>

    <!-- APARTMENT PAGE -->
    <div class="apartment-page" id="apartmentPage">
        <div class="breadcrumb"><a href="/">Home</a><span class="sep">/</span><a href="/apartments.html">Apartments</a><span class="sep">/</span><span class="current" id="breadcrumbName">‚Äî</span></div>

        <div class="apt-header">
            <div class="apt-header-top">
                <div class="apt-title-block">
                    <div class="apt-badges" id="aptBadges"></div>
                    <h1 class="apt-name" id="aptName"></h1>
                    <p class="apt-address" id="aptAddress"></p>
                    <span class="apt-zone" id="aptZone" style="display:none"></span>
                </div>
                <div class="apt-price-block">
                    <div class="apt-price" id="aptPrice"></div>
                    <div class="apt-price-label">per month</div>
                </div>
            </div>
            <div class="apt-specs" id="aptSpecs"></div>
        </div>

        <div class="media-section" id="mediaSection"></div>

        <div class="apt-content">
            <div class="apt-main">
                <div class="content-section" id="availSection" style="display:none"><div class="available-date-box"><span>üìÖ</span><span>Available from <strong id="availDate"></strong></span></div></div>
                <div class="content-section" id="descSection" style="display:none"><div class="content-section-title">About This Apartment</div><div class="apt-description" id="aptDescription"></div></div>
                <div class="content-section" id="featuresSection" style="display:none"><div class="content-section-title">Features &amp; Amenities</div><div class="features-grid" id="featuresGrid"></div></div>
                <div class="content-section" id="tagsSection" style="display:none"><div class="content-section-title">Tags</div><div class="tags-wrap" id="tagsWrap"></div></div>

                <div class="content-section" id="mapSection">
                    <div class="content-section-title">Location</div>
                    <div class="map-container" id="mapContainer"></div>
                    <div class="distance-calc">
                        <div class="distance-calc-title">üìç How far is it from‚Ä¶</div>
                        <div class="distance-input-row">
                            <input type="text" class="distance-input" id="distInput" placeholder="Enter university, workplace, station‚Ä¶">
                            <button class="distance-btn" id="distBtn" onclick="calcDistance()">Check</button>
                        </div>
                        <div class="quick-chips">
                            <span class="quick-chip" onclick="quickCheck('Sapienza University Rome')">Sapienza</span>
                            <span class="quick-chip" onclick="quickCheck('LUISS University Rome')">LUISS</span>
                            <span class="quick-chip" onclick="quickCheck('Roma Tre University')">Roma Tre</span>
                            <span class="quick-chip" onclick="quickCheck('John Cabot University Rome')">John Cabot</span>
                            <span class="quick-chip" onclick="quickCheck('Roma Termini Station')">Termini</span>
                            <span class="quick-chip" onclick="quickCheck('Colosseum Rome')">Colosseum</span>
                            <span class="quick-chip" onclick="quickCheck('Vatican City')">Vatican</span>
                            <span class="quick-chip" onclick="quickCheck('Trastevere Station Rome')">Trastevere</span>
                        </div>
                        <div class="route-results" id="routeResults">
                            <a class="route-link" id="routeWalk" href="#" target="_blank"><span class="route-icon">üö∂</span>Walking</a>
                            <a class="route-link" id="routeTransit" href="#" target="_blank"><span class="route-icon">üöá</span>Transit</a>
                            <a class="route-link" id="routeDrive" href="#" target="_blank"><span class="route-icon">üöó</span>Driving</a>
                            <a class="route-link" id="routeBike" href="#" target="_blank"><span class="route-icon">üö≤</span>Cycling</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="apt-sidebar" id="aptSidebar">
                <div class="sidebar-card">
                    <div class="sidebar-price" id="sidebarPrice"></div>
                    <div class="sidebar-price-label">per month ¬∑ all fees included</div>
                    <a class="sidebar-cta" id="sidebarWhatsApp" href="https://wa.me/393313251961" target="_blank">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="22" height="22"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z"/><path d="M12 0C5.373 0 0 5.373 0 12c0 2.125.553 4.12 1.52 5.855L.052 23.709l5.997-1.573A11.94 11.94 0 0012 24c6.627 0 12-5.373 12-12S18.627 0 12 0zm0 21.82c-1.956 0-3.83-.528-5.47-1.528l-.392-.233-4.065 1.066 1.084-3.964-.256-.407A9.787 9.787 0 012.18 12c0-5.414 4.406-9.82 9.82-9.82 5.414 0 9.82 4.406 9.82 9.82 0 5.414-4.406 9.82-9.82 9.82z"/></svg>
                        Message on WhatsApp
                    </a>
                    <a class="sidebar-secondary" href="/property-finding.html">Not this one? Find my perfect apartment ‚Üí</a>
                    <div class="sidebar-trust">
                        <div class="trust-item"><span class="ti">‚úì</span> Video-verified listing</div>
                        <div class="trust-item"><span class="ti">‚úì</span> No hidden fees</div>
                        <div class="trust-item"><span class="ti">‚úì</span> English contract available</div>
                        <div class="trust-item"><span class="ti">‚úì</span> 24/7 WhatsApp support</div>
                    </div>
                </div>
                <div class="sidebar-card inquiry-card" id="inquiryCard">
                    <h3>Interested?</h3>
                    <p>Send us your details and we'll get back to you within 2 hours.</p>
                    <form id="inquiryForm" action="https://api.web3forms.com/submit" method="POST">
                        <input type="hidden" name="access_key" value="8d4c9378-5211-4d7c-a2a6-f90c3789a2a6">
                        <input type="hidden" name="subject" id="formSubject" value="Inquiry from apartment detail page">
                        <input type="hidden" name="from_name" value="BOOM Apartment Inquiry">
                        <input type="hidden" name="redirect" value="https://www.boomrome.com/_thank-you.html">
                        <input type="text" name="name" placeholder="Your name" required>
                        <input type="email" name="email" placeholder="Your email" required>
                        <input type="tel" name="phone" placeholder="WhatsApp number (optional)">
                        <textarea name="message" id="formMessage" placeholder="When do you want to move in? Any questions?"></textarea>
                        <input type="hidden" name="apartment" id="formApartment" value="">
                        <input type="checkbox" name="botcheck" style="display:none">
                        <button type="submit" id="inquiryBtn">Send Inquiry</button>
                    </form>
                    <div class="inquiry-success" id="inquirySuccess">‚úì Sent! We'll contact you shortly.</div>
                </div>
            </div>
        <div class="upsell-section">
            <div class="upsell-header">
                <span class="upsell-tag">How Can We Help</span>
                <h2 class="upsell-title">Not exactly what you're looking for?</h2>
                <p class="upsell-subtitle">Whether you need us to find, verify, or negotiate ‚Äî we've got the service for every stage of your Rome apartment search.</p>
            </div>

            <!-- NOTIFY / ONBOARDING BANNER -->
            <div class="notify-banner">
                <div class="notify-icon">üîî</div>
                <div class="notify-text">
                    <h3>Get Notified When We Find a Match</h3>
                    <p>Fill out a quick form with your requirements ‚Äî budget, zone, move-in date. We'll reach out as soon as something fits. No commitment, no spam.</p>
                </div>
                <div class="notify-actions">
                    <a href="https://wa.me/393313251961?text=Hi%20BOOM%2C%20I%27m%20looking%20for%20an%20apartment%20in%20Rome.%20Here%20are%20my%20requirements%3A%0A%0ABudget%3A%20%0AZone%3A%20%0AMove-in%3A%20%0ABedrooms%3A%20" class="nbtn nbtn-wa" target="_blank">üí¨ WhatsApp Us</a>
                    <a href="https://boom-property-dashboards.web.app/onboarding.html" class="nbtn nbtn-primary">üìã Fill the Form</a>
                </div>
            </div>

            <!-- VIDEO SHOWCASE ‚Äî Living Phone, Firestore-powered -->
            <div class="video-showcase" id="videoShowcase">
                <div class="video-copy">
                    <div class="vc-tag"><span class="pulse"></span> Watch</div>
                    <h3>See how <strong>BOOM</strong> works<br>in 30 seconds</h3>
                    <p>Real footage. Real apartments. Real team on the ground in Rome ‚Äî not stock photos and algorithms.</p>
                    <div class="vc-stats">
                        <div class="vc-stat"><span>48h</span> move-in</div>
                        <div class="vc-stat"><span>98%</span> success</div>
                        <div class="vc-stat"><span>500+</span> placed</div>
                    </div>
                </div>
                <div class="video-device" id="videoDevice" onclick="openCinema()">
                    <div class="vd-glow"></div>
                    <div class="vd-frame">
                        <div class="vd-notch"></div>
                        <div class="vd-screen" id="vdScreen">
                            <img id="vdThumb" alt="BOOM Rome">
                            <div class="vd-play" id="vdPlay"><div class="vd-play-ring"></div></div>
                            <div class="vd-bar"><div class="vd-bar-dot"></div><span>BOOM Rome</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cinema Modal -->
            <div class="video-modal" id="videoModal" onclick="closeCinema(event)">
                <div class="video-modal-frame">
                    <button class="video-modal-close" onclick="closeCinema(event)">‚úï</button>
                    <div id="cinemaContainer"></div>
                </div>
            </div>

            <!-- SERVICE CARDS -->
            <div class="upsell-grid">
                <!-- PFS - Featured -->
                <div class="upsell-card featured">
                    <div class="upsell-card-popular">Most Popular</div>
                    <div class="upsell-card-top">
                        <span class="upsell-card-badge badge-pfs">üîç Full Search</span>
                        <div class="upsell-card-title">Property Finding</div>
                        <div class="upsell-card-desc">We search the entire Rome market for you ‚Äî portals, off-market, landlord network. Curated shortlist within 10 days.</div>
                        <div class="upsell-card-price-row">
                            <span class="upsell-card-price-val">‚Ç¨350</span>
                            <span class="upsell-card-price-unit">upfront ¬∑ deducted from agency fee</span>
                        </div>
                        <ul class="upsell-card-features">
                            <li><span class="ck">‚úì</span> Dedicated agent searching for you</li>
                            <li><span class="ck">‚úì</span> Access to off-market properties</li>
                            <li><span class="ck">‚úì</span> Curated shortlist in 10 days</li>
                            <li><span class="ck">‚úì</span> Video tour of every option</li>
                            <li><span class="ck">‚úì</span> Full refund if we don't deliver</li>
                        </ul>
                    </div>
                    <div class="upsell-card-bottom">
                        <a href="/property-finding.html" class="upsell-card-cta cta-gold">Start Property Finding ‚Üí</a>
                    </div>
                </div>

                <!-- DAS -->
                <div class="upsell-card">
                    <div class="upsell-card-top">
                        <span class="upsell-card-badge badge-das">ü§ù Contract Help</span>
                        <div class="upsell-card-title">Deal Assistance</div>
                        <div class="upsell-card-desc">Found a place yourself? We review the contract, verify the landlord, negotiate terms, and protect you from scams.</div>
                        <div class="upsell-card-price-row">
                            <span class="upsell-card-price-val">‚Ç¨249</span>
                            <span class="upsell-card-price-unit">fixed fee ¬∑ no surprises</span>
                        </div>
                        <ul class="upsell-card-features">
                            <li><span class="ck">‚úì</span> Contract review &amp; translation</li>
                            <li><span class="ck">‚úì</span> Landlord &amp; property verification</li>
                            <li><span class="ck">‚úì</span> Price &amp; terms negotiation</li>
                            <li><span class="ck">‚úì</span> Red flag identification</li>
                            <li><span class="ck">‚úì</span> Deposit protection advice</li>
                        </ul>
                    </div>
                    <div class="upsell-card-bottom">
                        <a href="/deal-assistance.html" class="upsell-card-cta cta-outline">Learn More ‚Üí</a>
                    </div>
                </div>

                <!-- VV -->
                <div class="upsell-card">
                    <div class="upsell-card-top">
                        <span class="upsell-card-badge badge-vv">üìπ Remote Viewing</span>
                        <div class="upsell-card-title">Virtual Viewing</div>
                        <div class="upsell-card-desc">Can't visit in person? We go for you ‚Äî live HD video walkthrough with real-time Q&amp;A and an honest assessment report.</div>
                        <div class="upsell-card-price-row">
                            <span class="upsell-card-price-val">‚Ç¨89</span>
                            <span class="upsell-card-price-unit">per viewing ¬∑ from abroad</span>
                        </div>
                        <ul class="upsell-card-features">
                            <li><span class="ck">‚úì</span> Live HD video walkthrough</li>
                            <li><span class="ck">‚úì</span> Real-time Q&amp;A with our agent</li>
                            <li><span class="ck">‚úì</span> Neighborhood &amp; building check</li>
                            <li><span class="ck">‚úì</span> Detailed written report</li>
                            <li><span class="ck">‚úì</span> Honest go / no-go recommendation</li>
                        </ul>
                    </div>
                    <div class="upsell-card-bottom">
                        <a href="/virtual-viewing.html" class="upsell-card-cta cta-outline">Learn More ‚Üí</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MOBILE CTA -->
    <div class="mobile-cta" id="mobileCta">
        <div class="mobile-cta-price" id="mobileCTAPrice"><small>per month</small></div>
        <a class="mobile-cta-btn" href="https://wa.me/393313251961" target="_blank" id="mobileCTABtn">üí¨ WhatsApp Us</a>
    </div>

    <!-- FOOTER -->
    <footer>
        <div class="footer-grid">
            <div class="footer-brand">
                <h3>BOOM</h3>
                <p>Built in Rome, for Rome. If we can make Rome's rental market work, we can make it work anywhere.<br><br><strong>Egidi Immobiliare S.r.l.</strong><br>P.IVA 17322991005<br>REA RM - 1710623<br>Rome, Italy</p>
            </div>
            <div class="footer-links"><h4>Services</h4><ul><li><a href="/apartments.html">Apartments</a></li><li><a href="/property-finding.html">Property Finding</a></li><li><a href="/deal-assistance.html">Deal Assistance</a></li><li><a href="/virtual-viewing.html">Virtual Viewing</a></li><li><a href="/concierge.html">Concierge</a></li></ul></div>
            <div class="footer-links"><h4>Company</h4><ul><li><a href="/about.html">About</a></li><li><a href="/how-it-works.html">How It Works</a></li><li><a href="/owners.html">For Owners</a></li><li><a href="/blog.html">Blog</a></li><li><a href="/faq.html">FAQ</a></li><li><a href="/contact.html">Contact</a></li></ul></div>
            <div class="footer-links"><h4>Legal</h4><ul><li><a href="/terms.html">Terms</a></li><li><a href="/privacy.html">Privacy</a></li><li><a href="/login.html">Login</a></li></ul></div>
        </div>
        <div class="footer-bottom"><span>¬© 2025 BOOM ‚Äî All Rights Reserved</span><span>Status: Operational</span></div>
    </footer>

    <!-- FIREBASE + APP -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script>
    firebase.initializeApp({apiKey:"AIzaSyDDb8UeSc8RhO_VxQrhLrupu1aPD4rwRso",authDomain:"boom-property-dashboards.firebaseapp.com",projectId:"boom-property-dashboards",storageBucket:"boom-property-dashboards.firebasestorage.app",messagingSenderId:"937269017440",appId:"1:937269017440:web:41c1a0b1e1633c2f373c05"});
    const db=firebase.firestore();
    let aptAddress='',currentSlide=0,totalSlides=0;

    document.addEventListener('DOMContentLoaded',()=>{
        const id=new URLSearchParams(window.location.search).get('id');
        if(!id){showError();return}
        loadApartment(id);
    });

    async function loadApartment(id){
        try{const doc=await db.collection('listings').doc(id).get();if(!doc.exists){showError();return}renderApartment(doc.data(),id)}
        catch(e){console.error('Error:',e);showError()}
    }

    function showError(){document.getElementById('pageLoading').style.display='none';document.getElementById('pageError').style.display='flex'}

    function renderApartment(d,id){
        const name=d.name||'Apartment';
        document.title=`${name} ‚Äî BOOM Rome`;

        const waMsg=encodeURIComponent(`Hi! I'm interested in "${name}" on BOOM Rome. Is it still available?`);
        const waUrl=`https://wa.me/393313251961?text=${waMsg}`;
        document.getElementById('sidebarWhatsApp').href=waUrl;
        document.getElementById('mobileCTABtn').href=waUrl;
        document.getElementById('breadcrumbName').textContent=name;

        // Badges
        const bEl=document.getElementById('aptBadges');
        const st=(d.status||'available').toLowerCase();
        const sm={'available':{c:'badge-available',t:'‚óè Available'},'waitlist':{c:'badge-waitlist',t:'‚óê Waitlist'},'rented':{c:'badge-rented',t:'‚óè Rented'}};
        const si=sm[st]||sm['available'];
        bEl.innerHTML=`<span class="badge ${si.c}">${si.t}</span><span class="badge badge-verified">‚úì Verified</span>`;
        if(d.videoUrl)bEl.innerHTML+='<span class="badge badge-video">‚ñ∂ Video Tour</span>';

        document.getElementById('aptName').textContent=name;
        aptAddress=d.address||'Rome, Italy';
        document.getElementById('aptAddress').textContent=aptAddress;
        if(d.zone){const z=document.getElementById('aptZone');z.textContent=d.zone;z.style.display='inline-block'}

        const price=d.price?`‚Ç¨${Number(d.price).toLocaleString()}`:'‚Äî';
        document.getElementById('aptPrice').textContent=price;
        document.getElementById('sidebarPrice').textContent=price;
        document.getElementById('mobileCTAPrice').innerHTML=`${price}<small>per month</small>`;

        // Specs
        const sEl=document.getElementById('aptSpecs'),specs=[];
        const beds=d.beds||d.bedrooms;
        if(beds)specs.push({i:'üõèÔ∏è',v:beds,l:beds>1?'Bedrooms':'Bedroom'});
        const sqm=d.sqm||d.size;
        if(sqm)specs.push({i:'üìê',v:`${sqm}m¬≤`,l:'Size'});
        if(d.floor)specs.push({i:'üè¢',v:d.floor,l:'Floor'});
        if(d.type)specs.push({i:'üè†',v:d.type,l:'Type'});
        sEl.innerHTML=specs.map(s=>`<div class="spec-item"><div class="spec-icon">${s.i}</div><div class="spec-text"><strong>${s.v}</strong><small>${s.l}</small></div></div>`).join('');

        if(d.availableDate){document.getElementById('availSection').style.display='block';document.getElementById('availDate').textContent=d.availableDate}
        if(d.description){document.getElementById('descSection').style.display='block';document.getElementById('aptDescription').innerHTML=d.description.replace(/\n/g,'<br>')}
        if(d.features&&d.features.length){document.getElementById('featuresSection').style.display='block';document.getElementById('featuresGrid').innerHTML=d.features.map(f=>`<div class="feature-item"><div class="feature-icon">${gFI(f)}</div><span>${f}</span></div>`).join('')}
        if(d.tags&&d.tags.length){document.getElementById('tagsSection').style.display='block';document.getElementById('tagsWrap').innerHTML=d.tags.map(t=>`<span class="tag">${t}</span>`).join('')}

        buildMedia(d);
        buildMap(d);

        document.getElementById('pageLoading').style.display='none';
        document.getElementById('apartmentPage').style.display='block';

        if(typeof gtag==='function')gtag('event','view_listing',{listing_id:id,listing_name:name,listing_price:d.price});

        // Web3Forms inquiry
        document.getElementById('formSubject').value=`Inquiry: ${name}`;
        document.getElementById('formApartment').value=name+' ('+id+')';
        document.getElementById('formMessage').placeholder=`I'm interested in ${name}. When can I move in?`;
        const iqForm=document.getElementById('inquiryForm');
        iqForm.addEventListener('submit',async function(e){
            e.preventDefault();
            const btn=document.getElementById('inquiryBtn');
            btn.disabled=true;btn.textContent='Sending‚Ä¶';
            try{
                const r=await fetch('https://api.web3forms.com/submit',{method:'POST',body:new FormData(iqForm)});
                const j=await r.json();
                if(j.success){iqForm.style.display='none';document.getElementById('inquirySuccess').style.display='block';if(typeof gtag==='function')gtag('event','inquiry_sent',{listing_id:id,listing_name:name})}
                else{btn.textContent='Error ‚Äî try again';btn.disabled=false}
            }catch(err){btn.textContent='Error ‚Äî try again';btn.disabled=false}
        });
    }

    function gFI(f){
        const l=f.toLowerCase();
        const m={'wifi':'üì∂','wi-fi':'üì∂','internet':'üì∂','air con':'‚ùÑÔ∏è','ac':'‚ùÑÔ∏è','a/c':'‚ùÑÔ∏è','conditioning':'‚ùÑÔ∏è','heating':'üî•','washing':'üß∫','laundry':'üß∫','dishwasher':'üçΩÔ∏è','elevator':'üõó','lift':'üõó','balcony':'üåø','terrace':'üåø','parking':'üÖøÔ∏è','garage':'üÖøÔ∏è','furnished':'ü™ë','pet':'üêæ','garden':'üå≥','storage':'üì¶','doorman':'üîë','concierge':'üîë','security':'üõ°Ô∏è','gym':'üí™','pool':'üèä','kitchen':'üç≥','bath':'üõÅ','tv':'üì∫','dryer':'üëï','view':'üèôÔ∏è','quiet':'ü§´','bright':'‚òÄÔ∏è','sunny':'‚òÄÔ∏è'};
        for(const[k,i]of Object.entries(m))if(l.includes(k))return i;
        return '‚ú¶';
    }

    function buildMedia(d){
        const sec=document.getElementById('mediaSection');
        const imgs=d.images||(d.image?[d.image]:[]);
        const vUrl=d.videoUrl,hasV=!!vUrl,vId=hasV?exYT(vUrl):null;

        if(!imgs.length&&!hasV){sec.innerHTML='<div class="media-placeholder"><span>üì∑</span><p>Photos coming soon</p></div>';return}
        if(imgs.length===1&&!hasV){sec.innerHTML=`<img src="${imgs[0]}" alt="Apartment photo" class="single-hero-img" loading="lazy">`;return}
        if(imgs.length===1&&hasV&&vId){sec.innerHTML=`<img src="${imgs[0]}" alt="Apartment photo" class="single-hero-img" loading="lazy"><div class="video-section"><div class="video-section-label">Video Tour</div><div class="video-embed"><iframe src="https://www.youtube.com/embed/${vId}?rel=0" allowfullscreen loading="lazy"></iframe></div></div>`;return}

        const slides=[...imgs];const hasVS=hasV&&vId;
        let sH=slides.map((img,i)=>`<div class="carousel-slide"><img src="${img}" alt="Photo ${i+1}" loading="lazy"></div>`).join('');
        if(hasVS)sH+=`<div class="carousel-slide video-slide"><iframe src="https://www.youtube.com/embed/${vId}?rel=0" allowfullscreen loading="lazy"></iframe></div>`;
        totalSlides=slides.length+(hasVS?1:0);

        let tH=slides.map((img,i)=>`<div class="carousel-thumb ${i===0?'active':''}" onclick="goTo(${i})"><img src="${img}" alt="Thumb ${i+1}"></div>`).join('');
        if(hasVS)tH+=`<div class="carousel-thumb video-thumb" onclick="goTo(${slides.length})"></div>`;

        sec.innerHTML=`<div class="carousel" id="carousel">${hasVS?'<div class="carousel-video-badge" style="display:block">‚ñ∂ Video Tour</div>':''}<div class="carousel-track" id="carouselTrack">${sH}</div><button class="carousel-btn carousel-prev" onclick="prev()">‚Äπ</button><button class="carousel-btn carousel-next" onclick="next()">‚Ä∫</button><div class="carousel-counter" id="carouselCounter">1 / ${totalSlides}</div></div><div class="carousel-thumbs" id="carouselThumbs">${tH}</div>`;
        initSwipe();
    }

    function exYT(u){if(!u)return null;const m=u.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/shorts\/)([a-zA-Z0-9_-]{11})/);return m?m[1]:null}
    function goTo(i){currentSlide=i;updC()}
    function next(){currentSlide=(currentSlide+1)%totalSlides;updC()}
    function prev(){currentSlide=(currentSlide-1+totalSlides)%totalSlides;updC()}
    function updC(){
        const t=document.getElementById('carouselTrack');if(!t)return;
        t.style.transform=`translateX(-${currentSlide*100}%)`;
        document.getElementById('carouselCounter').textContent=`${currentSlide+1} / ${totalSlides}`;
        document.querySelectorAll('.carousel-thumb').forEach((th,i)=>th.classList.toggle('active',i===currentSlide));
        const a=document.querySelector('.carousel-thumb.active');if(a)a.scrollIntoView({behavior:'smooth',inline:'center',block:'nearest'});
    }
    function initSwipe(){
        const c=document.getElementById('carousel');if(!c)return;
        let sX=0,dX=0;
        c.addEventListener('touchstart',e=>{sX=e.touches[0].clientX},{passive:true});
        c.addEventListener('touchmove',e=>{dX=e.touches[0].clientX-sX},{passive:true});
        c.addEventListener('touchend',()=>{if(Math.abs(dX)>50){dX<0?next():prev()}dX=0});
    }
    document.addEventListener('keydown',e=>{if(e.key==='ArrowRight')next();if(e.key==='ArrowLeft')prev()});

    function buildMap(d){
        const c=document.getElementById('mapContainer');
        const addr=d.address||'Rome, Italy';
        c.innerHTML=`<iframe src="https://maps.google.com/maps?q=${encodeURIComponent(addr)}&t=&z=15&ie=UTF8&iwloc=&output=embed" allowfullscreen loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>`;
    }

    function calcDistance(){const d=document.getElementById('distInput').value.trim();if(!d)return;showRoutes(aptAddress,d)}
    function quickCheck(dest){document.getElementById('distInput').value=dest;showRoutes(aptAddress,dest)}
    function showRoutes(o,d){
        const oe=encodeURIComponent(o),de=encodeURIComponent(d),b=`https://www.google.com/maps/dir/?api=1&origin=${oe}&destination=${de}`;
        document.getElementById('routeWalk').href=`${b}&travelmode=walking`;
        document.getElementById('routeTransit').href=`${b}&travelmode=transit`;
        document.getElementById('routeDrive').href=`${b}&travelmode=driving`;
        document.getElementById('routeBike').href=`${b}&travelmode=bicycling`;
        document.getElementById('routeResults').classList.add('active');
    }
    document.getElementById('distInput').addEventListener('keydown',e=>{if(e.key==='Enter')calcDistance()});

    // Mobile menu
    const hb=document.getElementById('hamburger'),mm=document.getElementById('mobileMenu');
    hb.addEventListener('click',()=>{hb.classList.toggle('active');mm.classList.toggle('active');document.body.style.overflow=mm.classList.contains('active')?'hidden':''});
    mm.querySelectorAll('a').forEach(a=>a.addEventListener('click',()=>{hb.classList.remove('active');mm.classList.remove('active');document.body.style.overflow=''}));
    </script>

    <!-- Video ‚Äî Firestore-powered, autoplay on scroll, cinema on click -->
    <script>
    let boomVideoId = 'xb1OON-bhK4';
    let inlinePlayer = null;

    function loadVideoSetting() {
        if (typeof db === 'undefined') { initVideo(boomVideoId); return; }
        db.collection('settings').doc('video').get().then(doc => {
            if (doc.exists && doc.data().youtubeId) {
                boomVideoId = doc.data().youtubeId;
                initVideo(boomVideoId);
            } else if (doc.exists && doc.data().url) {
                const url = doc.data().url;
                const m = url.match(/(?:shorts\/|watch\?v=|embed\/|youtu\.be\/)([a-zA-Z0-9_-]{11})/);
                if (m) { boomVideoId = m[1]; initVideo(boomVideoId); }
                else { document.getElementById('videoShowcase').classList.add('hidden'); }
            } else {
                document.getElementById('videoShowcase').classList.add('hidden');
            }
        }).catch(() => initVideo(boomVideoId));
    }

    function initVideo(vid) {
        const showcase = document.getElementById('videoShowcase');
        const device = document.getElementById('videoDevice');
        if (!vid) { showcase.classList.add('hidden'); return; }

        // Set thumbnail with maxres quality
        const thumb = document.getElementById('vdThumb');
        const maxres = new Image();
        maxres.onload = () => { thumb.src = maxres.src; };
        maxres.onerror = () => { thumb.src = 'https://img.youtube.com/vi/' + vid + '/hqdefault.jpg'; };
        maxres.src = 'https://img.youtube.com/vi/' + vid + '/maxresdefault.jpg';

        // Entrance animation ‚Äî fade in when showcase enters viewport
        const entranceObs = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    showcase.classList.add('visible');
                    entranceObs.disconnect();
                }
            });
        }, { threshold: 0.15 });
        entranceObs.observe(showcase);

        // Autoplay muted in phone when 30% visible
        const playObs = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !inlinePlayer) {
                    // Small delay for smooth sequencing after entrance animation
                    setTimeout(() => {
                        const screen = document.getElementById('vdScreen');
                        const iframe = document.createElement('iframe');
                        iframe.src = 'https://www.youtube.com/embed/' + vid + '?autoplay=1&mute=1&loop=1&playlist=' + vid + '&controls=0&showinfo=0&rel=0&playsinline=1&modestbranding=1&iv_load_policy=3';
                        iframe.allow = 'autoplay;encrypted-media';
                        iframe.loading = 'lazy';
                        screen.insertBefore(iframe, screen.querySelector('.vd-play'));
                        inlinePlayer = iframe;

                        // Smooth transition: fade iframe in, fade thumbnail out, activate playing state
                        iframe.onload = () => {
                            // Wait a beat for YouTube to actually start rendering
                            setTimeout(() => {
                                device.classList.add('playing');
                                thumb.style.opacity = '0';
                                document.getElementById('vdPlay').classList.add('hidden');
                            }, 800);
                        };
                    }, 600);
                    playObs.disconnect();
                }
            });
        }, { threshold: 0.3 });
        playObs.observe(showcase);
    }

    function openCinema() {
        const m = document.getElementById('videoModal');
        const c = document.getElementById('cinemaContainer');
        m.style.display = 'flex';
        // Force reflow for animation
        requestAnimationFrame(() => {
            requestAnimationFrame(() => {
                m.classList.add('open');
            });
        });
        c.innerHTML = '<iframe src="https://www.youtube.com/embed/' + boomVideoId + '?autoplay=1&rel=0&modestbranding=1&playsinline=1" allow="autoplay;encrypted-media;fullscreen" allowfullscreen></iframe>';
        document.body.style.overflow = 'hidden';
        if (inlinePlayer) inlinePlayer.src = '';
    }

    function closeCinema(e) {
        if (e && e.target.closest('.video-modal-frame') && !e.target.closest('.video-modal-close')) return;
        const m = document.getElementById('videoModal');
        m.classList.remove('open');
        // Wait for exit animation, then cleanup
        setTimeout(() => {
            document.getElementById('cinemaContainer').innerHTML = '';
            m.style.display = 'none';
            document.body.style.overflow = '';
            // Resume inline silently
            if (inlinePlayer) {
                inlinePlayer.src = 'https://www.youtube.com/embed/' + boomVideoId + '?autoplay=1&mute=1&loop=1&playlist=' + boomVideoId + '&controls=0&showinfo=0&rel=0&playsinline=1&modestbranding=1&iv_load_policy=3';
            }
        }, 400);
    }

    document.addEventListener('keydown', e => { if (e.key === 'Escape') closeCinema(e); });
    if (typeof db !== 'undefined') { loadVideoSetting(); } else { window.addEventListener('load', () => setTimeout(loadVideoSetting, 500)); }
    </script>
</body>
</html>
